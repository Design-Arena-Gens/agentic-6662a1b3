<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FitTrack360</title>
  <link rel="stylesheet" href="./assets/css/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection@3.5.0" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5" defer></script>
  <script src="./assets/js/app.js" defer></script>
</head>
<body class="theme-dark">
  <aside class="sidebar">
    <div class="logo">FitTrack360</div>
    <nav class="nav">
      <button data-target="section-auth" class="nav__link active">Auth</button>
      <button data-target="section-analytics" class="nav__link">Analytics</button>
      <button data-target="section-attendance" class="nav__link">Attendance</button>
      <button data-target="section-posture" class="nav__link">Posture</button>
      <button data-target="section-diet" class="nav__link">Diet Plan</button>
      <button data-target="section-progress" class="nav__link">Progress</button>
    </nav>
    <div class="theme-toggle">
      <label>
        <input type="checkbox" id="themeSwitcher" />
        <span>Light mode</span>
      </label>
    </div>
  </aside>

  <main class="main">
    <header class="main__header">
      <h1 id="welcomeTitle">Welcome to FitTrack360</h1>
      <div class="status-grid">
        <div class="status-card">
          <span class="status-label">MySQL</span>
          <span id="mysqlStatus" class="status-indicator status-indicator--idle">--</span>
        </div>
        <div class="status-card">
          <span class="status-label">MongoDB</span>
          <span id="mongoStatus" class="status-indicator status-indicator--idle">--</span>
        </div>
        <div class="status-card">
          <span class="status-label">Total Users</span>
          <span id="totalUsers" class="status-value">0</span>
        </div>
      </div>
    </header>

    <section id="section-auth" class="section section--active">
      <div class="card-grid">
        <div class="card">
          <h2>Register</h2>
          <form id="registerForm" class="form">
            <input type="text" name="full_name" placeholder="Full name" required />
            <input type="email" name="email" placeholder="Email" required />
            <input type="password" name="password" placeholder="Password" required />
            <button type="submit">Sign up</button>
          </form>
        </div>
        <div class="card">
          <h2>Login with Face Detection</h2>
          <div class="video-container">
            <video id="faceVideo" autoplay playsinline></video>
            <canvas id="faceCanvas"></canvas>
          </div>
          <form id="loginForm" class="form">
            <input type="email" name="email" placeholder="Email" required />
            <input type="password" name="password" placeholder="Password" required />
            <button type="submit">Login</button>
          </form>
          <p class="info">Face detection must activate before login is accepted.</p>
        </div>
      </div>
    </section>

    <section id="section-analytics" class="section">
      <div class="card-grid">
        <div class="card">
          <h2>Attendance Analytics</h2>
          <canvas id="attendanceChart" height="200"></canvas>
        </div>
        <div class="card">
          <h2>Posture Accuracy Trend</h2>
          <canvas id="postureChart" height="200"></canvas>
        </div>
        <div class="card">
          <h2>Download Attendance Report</h2>
          <button id="exportAttendance">Export CSV</button>
        </div>
      </div>
    </section>

    <section id="section-attendance" class="section">
      <div class="card-grid">
        <div class="card">
          <h2>QR Check-in</h2>
          <form id="qrForm" class="form">
            <select name="check_type">
              <option value="checkin">Check-in</option>
              <option value="checkout">Check-out</option>
            </select>
            <button type="submit">Generate QR</button>
          </form>
          <div class="qr-display">
            <img id="qrImage" alt="QR Code" />
            <pre id="qrPayload"></pre>
          </div>
        </div>
        <div class="card">
          <h2>History</h2>
          <table class="table" id="attendanceTable">
            <thead>
              <tr>
                <th>Type</th>
                <th>Token</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="section-posture" class="section">
      <div class="card-grid">
        <div class="card card--wide">
          <h2>Live Exercise Analysis</h2>
          <div class="video-card">
            <video id="workoutVideo" autoplay playsinline></video>
            <canvas id="workoutCanvas"></canvas>
            <div class="overlay">
              <div class="overlay__stat">
                <span>Exercise:</span>
                <select id="exerciseSelect">
                  <option value="hand_raises">Hand Raises</option>
                  <option value="sit_ups">Sit-ups</option>
                </select>
              </div>
              <div class="overlay__stat">
                <span>Completion</span>
                <strong id="completionRate">0%</strong>
              </div>
              <div class="overlay__stat">
                <span>Feedback</span>
                <strong id="feedbackText">Awaiting body alignment...</strong>
              </div>
              <button id="startWorkout">Start Session</button>
              <button id="stopWorkout" class="ghost">Stop Session</button>
            </div>
          </div>
        </div>
        <div class="card">
          <h2>Recent Sessions</h2>
          <ul id="sessionList" class="session-list"></ul>
        </div>
      </div>
    </section>

    <section id="section-diet" class="section">
      <div class="card-grid">
        <div class="card">
          <h2>Diet Preferences</h2>
          <form id="dietForm" class="form">
            <select name="type">
              <option value="vegetarian">Vegetarian</option>
              <option value="non_vegetarian">Non-Vegetarian</option>
            </select>
            <select name="activity">
              <option value="sedentary">Sedentary</option>
              <option value="light">Light</option>
              <option value="moderate" selected>Moderate</option>
              <option value="intense">Intense</option>
            </select>
            <input type="number" name="weight" placeholder="Weight (kg)" value="70" />
            <input type="number" name="height" placeholder="Height (cm)" value="170" />
            <input type="number" name="age" placeholder="Age" value="28" />
            <select name="gender">
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
            <button type="submit">Generate Plan</button>
          </form>
        </div>
        <div class="card card--wide" id="dietPlan"></div>
      </div>
    </section>

    <section id="section-progress" class="section">
      <div class="card-grid">
        <div class="card">
          <h2>Daily Performance</h2>
          <canvas id="dailyChart" height="160"></canvas>
        </div>
        <div class="card">
          <h2>Weekly Performance</h2>
          <canvas id="weeklyChart" height="160"></canvas>
        </div>
        <div class="card">
          <h2>Monthly Calories Burned</h2>
          <canvas id="monthlyChart" height="160"></canvas>
        </div>
      </div>
    </section>
  </main>

  <div class="chatbot" id="chatbot">
    <div class="chatbot__header">
      <h3>CoachBot</h3>
      <span class="chatbot__status">24Ã—7 online</span>
    </div>
    <div class="chatbot__messages" id="chatMessages"></div>
    <form id="chatForm" class="chatbot__form">
      <input type="text" id="chatInput" placeholder="Ask about diet, macros, workouts..." />
      <button type="submit">Send</button>
    </form>
  </div>
</body>
</html>
